<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <title>Colby Chatbot Responses</title>
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <link rel="stylesheet" href="static/dashboard.css" />
  </head>
  <body>
    <div class="page">
      <header style="margin-bottom: 18px;">
        <div
          style="display:flex;justify-content:space-between;gap:12px;align-items:flex-start;flex-wrap:wrap;"
        >
          <div>
            <h1>Responses</h1>
            <div class="subheading">
              View recent user questions, answers, and model decisions. Use search and
              date filters to narrow down.
            </div>
          </div>
          <div style="text-align:right;min-width:220px;">
            <div class="badge-pill" style="margin-bottom:6px;cursor:pointer;" onclick="window.location.href='./'">
              <span>&larr;</span>
              <strong>Back to Admin</strong>
            </div>
          </div>
        </div>
        <div id="responsesGlobalStatus" class="status"></div>
      </header>

      <div class="card">
        <div
          class="field-row"
          style="flex-wrap:wrap;align-items:flex-end;gap:10px;margin-bottom:8px;"
        >
          <div style="flex:1;min-width:320px;">
            <label for="responsesSearchInput">Search</label>
            <input
              id="responsesSearchInput"
              type="text"
              placeholder="Search question or answer..."
            />
          </div>
        </div>
        <div
          class="field-row"
          style="flex-wrap:wrap;align-items:flex-end;gap:10px;margin-bottom:10px;"
        >
          <div style="min-width:160px;">
            <label for="responsesStatusFilter">Status</label>
            <select id="responsesStatusFilter" class="range-select">
              <option value="">All</option>
              <option value="answered">Answered</option>
              <option value="blocked">Blocked</option>
              <option value="blocked_by_blacklist_validator">Blocked – Blacklist agent</option>
              <option value="blocked_by_query_validator">Blocked – Query validator</option>
              <option value="standard_rejection_answered">Standard rejection (answered)</option>
              <option value="error">Error</option>
              <option value="blacklisted">Blacklisted</option>
              <option value="whitelisted">Whitelisted</option>
            </select>
          </div>
          <div style="min-width:200px;">
            <label for="responsesRange">Date range</label>
            <select id="responsesRange" class="range-select">
              <option value="7d">Last 7 days</option>
              <option value="today">Today</option>
              <option value="yesterday">Yesterday</option>
              <option value="30d">Last 30 days</option>
              <option value="all">All time</option>
              <option value="custom">Custom range…</option>
            </select>
          </div>
          <div style="flex:1;display:flex;justify-content:flex-end;">
            <button id="exportCsvBtn" class="secondary" style="display:inline-flex;align-items:center;gap:6px;">
              <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"/>
                <polyline points="7 10 12 15 17 10"/>
                <line x1="12" y1="15" x2="12" y2="3"/>
              </svg>
              Export as CSV
            </button>
          </div>
        </div>

        <div
          id="responsesCustomRangeRow"
          class="field-row"
          style="flex-wrap:wrap;align-items:flex-end;gap:10px;margin-bottom:10px;display:none;"
        >
          <div>
            <label for="responsesStartDate">Start date</label>
            <input id="responsesStartDate" type="date" />
          </div>
          <div>
            <label for="responsesEndDate">End date</label>
            <input id="responsesEndDate" type="date" />
          </div>
        </div>

        <div id="responsesTableContainer"></div>
      </div>
    </div>

    <script type="module" src="static/responses.js"></script>
  </body>
</html>


